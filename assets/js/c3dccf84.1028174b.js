"use strict";(self.webpackChunkaurora_docs=self.webpackChunkaurora_docs||[]).push([[272],{9613:(e,t,o)=>{o.d(t,{Zo:()=>l,kt:()=>m});var r=o(9496);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function p(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var c=r.createContext({}),s=function(e){var t=r.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},l=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,c=e.parentName,l=p(e,["components","mdxType","originalType","parentName"]),u=s(o),d=n,m=u["".concat(c,".").concat(d)]||u[d]||h[d]||a;return o?r.createElement(m,i(i({ref:t},l),{},{components:o})):r.createElement(m,i({ref:t},l))}));function m(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,i=new Array(a);i[0]=d;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p[u]="string"==typeof e?e:n,i[1]=p;for(var s=2;s<a;s++)i[s]=o[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}d.displayName="MDXCreateElement"},8598:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>p,toc:()=>s});var r=o(1163),n=(o(9496),o(9613));const a={title:"EVM Overview",sidebar_position:1},i="EVM Overview",p={unversionedId:"evm/evm-overview",id:"evm/evm-overview",title:"EVM Overview",description:"Initially developed in-house at NEAR, the Aurora EVM is the official EVM for the",source:"@site/docs/evm/evm-overview.md",sourceDirName:"evm",slug:"/evm/evm-overview",permalink:"/evm/evm-overview",draft:!1,editUrl:"https://github.com/aurora-is-near/doc.aurora.dev/edit/master/docs/evm/evm-overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"EVM Overview",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Verify a contract",permalink:"/interact/verify-contract"},next:{title:"Opcodes",permalink:"/evm/opcodes"}},c={},s=[{value:"Powered by SputnikVM",id:"powered-by-sputnikvm",level:2},{value:"Additional Features",id:"additional-features",level:2},{value:"Changes to the output of some Opcodes",id:"changes-to-the-output-of-some-opcodes",level:3},{value:"Additional precompiles",id:"additional-precompiles",level:3},{value:"Default NEP-141 mapped ERC-20 contract",id:"default-nep-141-mapped-erc-20-contract",level:3}],l={toc:s},u="wrapper";function h(e){let{components:t,...o}=e;return(0,n.kt)(u,(0,r.Z)({},l,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"evm-overview"},"EVM Overview"),(0,n.kt)("p",null,"Initially developed in-house at NEAR, the Aurora EVM is the official EVM for the\nNEAR ecosystem. ",(0,n.kt)("em",{parentName:"p"},"It accomplishes a 1:1 experience with the Ethereum protocol\nincluding adopting ETH as the base currency"),". Beyond the base scope, the EVM also allows\nfor extra precompiles. Such precompiles enable the EVM to interact with the rest of the NEAR ecosystem."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"We implore you to interact through the EVM through MetaMask or Hardhat as we provide\nan identical experience through our RPC. However, you may also interact with it through ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/near/workspaces"},"NEAR\nworkspaces"),", the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/near/near-cli"},"NEAR CLI"),", or the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/aurora-is-near/aurora-cli"},"Aurora CLI"),".")),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"Since the underlying measure of computational work is ",(0,n.kt)("em",{parentName:"p"},"NEAR gas"),", an edge case that arises is when\nthe transaction runs out of NEAR gas before running out of ",(0,n.kt)("em",{parentName:"p"},"EVM gas"),"."),(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("em",{parentName:"p"},"In this case the transaction will be considered as failed on Aurora"),", but this may or may not be\ncompatible with what the outcome on Ethereum would have been (if the gas limit was actually high\nenough for the transaction to complete had NEAR gas not been the limiting factor)."),(0,n.kt)("p",{parentName:"admonition"},"This case will not come up for the vast majority of transactions, and indeed will become\nless likely as we improve the efficiency of our EVM contract (thus allowing NEAR gas to go further\nin terms of EVM computation). Eventually, we hope to eliminate this entirely by setting\nthe ",(0,n.kt)("a",{parentName:"p",href:"https://ethereum.org/en/developers/docs/blocks/#block-size"},"ETH block gas limit")," on Aurora to be lower than the amount of NEAR which we could spend in one\ntransaction.")),(0,n.kt)("h2",{id:"powered-by-sputnikvm"},"Powered by SputnikVM"),(0,n.kt)("p",null,"The Aurora EVM utilises the power of the ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/rust-blockchain/evm"},"SputnikVM")," in its current implementation. Additionally,\npart of the Aurora Labs team have been made contributors to the project due to the significant\ncontributions that they have made. However, we intend to explore other implementations and possibly\ndevelop our own backend depending on performance considerations."),(0,n.kt)("h2",{id:"additional-features"},"Additional Features"),(0,n.kt)("h3",{id:"changes-to-the-output-of-some-opcodes"},"Changes to the output of some Opcodes"),(0,n.kt)("p",null,"Some of the Opcodes provided by Ethereum we are not able to entirely support. Though we do not\nbelieve that this will impact EVM contracts that use these Opcodes, it is important to note these\nchanges which can be found in the ",(0,n.kt)("a",{parentName:"p",href:"/evm/opcodes"},"Aurora EVM opcode documentation"),"."),(0,n.kt)("h3",{id:"additional-precompiles"},"Additional precompiles"),(0,n.kt)("p",null,"In order to provide additional support to the NEAR ecosystem, some additional precompiles are\navailable. However, the ",(0,n.kt)("inlineCode",{parentName:"p"},"exitToNear")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"exitToEthereum")," precompiles are only accessible through\nthe NEP-141 to ERC-20 contract which only can be deployed via the ",(0,n.kt)("inlineCode",{parentName:"p"},"deploy_erc20_token")," function in\nthe Aurora EVM."),(0,n.kt)("p",null,"More information about these precompiles can be found in the ",(0,n.kt)("a",{parentName:"p",href:"/evm/precompiles"},"Aurora EVM precompile documentation"),"."),(0,n.kt)("h3",{id:"default-nep-141-mapped-erc-20-contract"},"Default NEP-141 mapped ERC-20 contract"),(0,n.kt)("p",null,"Under the hood, all bridged ERC-20 contracts are NEAR NEP-141 fungible tokens through the process\ndescribed in the ",(0,n.kt)("a",{parentName:"p",href:"/bridge/bridge-overview"},"Rainbow Bridge overview"),"."),(0,n.kt)("p",null,"In order to grant the ability to access to NEP-141 fungible tokens as an ERC-20 contract, we use the\nNEP-141 mapped ERC-20 contract which is automatically deployed by the Aurora EVM when invoking the\n",(0,n.kt)("inlineCode",{parentName:"p"},"deploy_erc20_token")," function. This allows users to deposit ERC-20 fungible tokens through the\nRainbow Bridge which will generate a proof for the Engine to confirm the transfers' existence. Thus\nenabling the user to access their NEP-141 or Ethereum ERC-20 tokens on Aurora."))}h.isMDXComponent=!0}}]);